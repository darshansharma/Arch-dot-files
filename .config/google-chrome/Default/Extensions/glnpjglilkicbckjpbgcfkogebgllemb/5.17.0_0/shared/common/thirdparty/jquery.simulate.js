(function(e,t){var n=/^key/,i=/^(?:mouse|contextmenu)|click/,c=/^touch/,o=window;e.simulateSetDefaultWindow=function(e){o=e};e.fn.simulate=function(t,n){return this.each(function(){new e.simulate(this,t,n)})};e.simulate=function(t,n,i){var c=e.camelCase("simulate-"+n);this.target=t;this.options=i;if(this[c]){this[c]()}else{this.simulateEvent(t,n,i)}};e.extend(e.simulate,{keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},buttonCode:{LEFT:0,MIDDLE:1,RIGHT:2}});e.extend(e.simulate.prototype,{simulateEvent:function(e,t,n){var i=this.createEvent(t,n);this.dispatchEvent(e,t,i,n)},createEvent:function(e,t){if(n.test(e)){return this.keyEvent(e,t)}if(i.test(e)){return this.mouseEvent(e,t)}if(c.test(e)){return this.touchEvent(e,t)}},mouseEvent:function(n,i){var c,a,r,u;i=e.extend({bubbles:true,cancelable:n!=="mousemove",view:o,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:t},i);if(document.createEvent){c=document.createEvent("MouseEvents");c.initMouseEvent(n,i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget||e(this.target)[0].ownerDocument.body.parentNode);if(c.pageX===0&&c.pageY===0&&Object.defineProperty){a=c.relatedTarget.ownerDocument||document;r=a.documentElement;u=a.body;Object.defineProperty(c,"pageX",{get:function(){return i.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0)}});Object.defineProperty(c,"pageY",{get:function(){return i.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0)}})}}else if(document.createEventObject){c=document.createEventObject();e.extend(c,i);c.button={0:1,1:4,2:2}[c.button]||c.button}return c},touchEvent:function(e,t){var n=this.mouseEvent(e,t);n.changedTouches=n.touches=[{identifier:Date.now()+Math.random(),clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY}];return n},keyEvent:function(n,i){var c;i=e.extend({bubbles:true,cancelable:true,view:o,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:t},i);if(document.createEvent){try{c=document.createEvent("KeyEvents");c.initKeyEvent(n,i.bubbles,i.cancelable,i.view,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode)}catch(a){c=document.createEvent("Events");c.initEvent(n,i.bubbles,i.cancelable);e.extend(c,{view:i.view,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey,keyCode:i.keyCode,charCode:i.charCode})}}else if(document.createEventObject){c=document.createEventObject();e.extend(c,i)}if(!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||{}.toString.call(window.opera)==="[object Opera]"){c.keyCode=i.charCode>0?i.charCode:i.keyCode;c.charCode=t}return c},dispatchEvent:function(e,t,n){if(e.dispatchEvent){e.dispatchEvent(n)}else if(e.fireEvent){e.fireEvent("on"+t,n)}},simulateFocus:function(){var t,n=false,i=e(this.target);function c(){n=true}i.bind("focus",c);i[0].focus();if(!n){t=e.Event("focusin");t.preventDefault();i.trigger(t);i.triggerHandler("focus")}i.unbind("focus",c)},simulateBlur:function(){var t,n=false,i=e(this.target);function c(){n=true}i.bind("blur",c);i[0].blur();setTimeout(function(){if(i[0].ownerDocument.activeElement===i[0]){i[0].ownerDocument.body.focus()}if(!n){t=e.Event("focusout");t.preventDefault();i.trigger(t);i.triggerHandler("blur")}i.unbind("blur",c)},1)},simulateClick:function(){var t=e(this.target)[0];if(t.click){t.click()}else{this.simulateEvent(this.target,"click",this.options)}},simulateInput:function(){var t=this.htmlEvent("input",{bubbles:true,cancelable:true});this.dispatchEvent(e(this.target)[0],"input",t)},simulateChange:function(){var t=this.htmlEvent("change",{bubbles:false,cancelable:true});this.dispatchEvent(e(this.target)[0],"change",t)},htmlEvent:function(t,n){var i;if(document.createEvent){i=document.createEvent("HTMLEvents");i.initEvent(t,n.bubbles,n.cancelable)}else if(document.createEventObject){i=document.createEventObject();e.extend(i,n)}return i}});function a(t){var n,i=e(t.ownerDocument);t=e(t);n=t.offset();return{x:n.left+t.outerWidth()/2-i.scrollLeft(),y:n.top+t.outerHeight()/2-i.scrollTop()}}function r(t){var n,i=e(t.ownerDocument);t=e(t);n=t.offset();return{x:n.left-i.scrollLeft(),y:n.top-i.scrollTop()}}e.extend(e.simulate.prototype,{simulateDrag:function(){var e=0,n=this.target,i=this.options,c=i.handle==="corner"?r(n):a(n),o=Math.floor(c.x),u=Math.floor(c.y),s={clientX:o,clientY:u},l=i.dx||(i.x!==t?i.x-o:0),f=i.dy||(i.y!==t?i.y-u:0),v=i.moves||3;this.simulateEvent(n,"mousedown",s);for(;e<v;e++){o+=l/v;u+=f/v;s={clientX:Math.round(o),clientY:Math.round(u)};this.simulateEvent(document,"mousemove",s)}this.simulateEvent(n,"mouseup",s);this.simulateEvent(n,"click",s)}})})($okta);